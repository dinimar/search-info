
<!DOCTYPE html>
<html lang="ru-ru" dir="ltr" class='com_content view-article itemid-110 j39 mm-hover '>
<head>
<link href="https://www.startandroid.ru/templates/mycustomcss.css" rel="stylesheet" type="text/css">
	<base href="https://startandroid.ru/ru/uroki/vse-uroki-spiskom/69-urok-30-podrobnee-pro-onactivityresult-zachem-nuzhny-requestcode-i-resultcode.html"/>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<meta name="keywords" content="Activiy, Intent, onActivityResult, requestCode, resultCode, RESULT_OK, setResult, startActivityForResult"/>
	<meta name="rights" content="StartAndroid"/>
	<meta name="og:title" content="Урок 30. Подробнее про onActivityResult. Зачем нужны requestCode и resultCode"/>
	<meta name="og:type" content="article"/>
	<meta name="og:image" content="https://lh6.googleusercontent.com/-2QOVr0-neA8/TqQ_16gqBqI/AAAAAAAAAgY/F8pv2XbLscA/s640/20111017_L0028_L_MainScreen.jpg"/>
	<meta name="og:url" content="https://startandroid.ru/ru/uroki/vse-uroki-spiskom/69-urok-30-podrobnee-pro-onactivityresult-zachem-nuzhny-requestcode-i-resultcode.html"/>
	<meta name="og:site_name" content="StartAndroid"/>
	<meta name="og:description" content="Как вызвать Activity и получить результат. Зачем нужны requestCode и resultCode"/>
	<meta name="author" content="Dmitry Vinogradov"/>
	<meta name="description" content="Как вызвать Activity и получить результат. Зачем нужны requestCode и resultCode"/>
	<meta name="generator" content="Joomla! - Open Source Content Management"/>
	<title>Урок 30. Подробнее про onActivityResult. Зачем нужны requestCode и resultCode</title>
	<link href="https://startandroid.ru/ru/uroki/vse-uroki-spiskom/69-urok-30-podrobnee-pro-onactivityresult-zachem-nuzhny-requestcode-i-resultcode.html" rel="alternate" hreflang="ru-RU"/>
	<link href="https://startandroid.ru/en/lessons/521-lesson-30-more-details-about-onactivityresult.html" rel="alternate" hreflang="en-GB"/>
	<link href="/templates/purity_iii/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon"/>
	<link href="/A.templates,,_purity_iii,,_local,,_css,,_bootstrap.css+components,,_com_jcomments,,_tpl,,_default,,_style.css,,qv==3002+plugins,,_content,,_hs_highlighter,,_lib,,_styles,,_shCore.css+plugins,,_content,,_hs_highlighter,,_lib,,_styles,,_shThemeDefault.css,Mcc.g9s2Fj-V5G.css.pagespeed.cf.C1U8Cas-X8.css" rel="stylesheet" type="text/css"/>
	
	
	
	<link href="http://www.startandroid.ru/plugins/content/jfusion/discussbot/tmpl/default/jfusion.css" rel="stylesheet" type="text/css"/>
	<link href="/A.templates,,_system,,_css,,_system.css+templates,,_purity_iii,,_local,,_css,,_template.css+templates,,_purity_iii,,_local,,_css,,_megamenu.css+templates,,_purity_iii,,_local,,_css,,_off-canvas.css+templates,,_purity_iii,,_fonts,,_font-awesome,,_css,,_font-awesome.min.css+templates,,_purity_iii,,_local,,_css,,_layouts,,_corporate.css+plugins,,_system,,_mediabox_ck,,_assets,,_mediaboxck.css+media,,_mod_languages,,_css,,_template.css,,q092552cf642fe2bdd8a0d9879112de23,Mcc.8bkeEgaG8c.css.pagespeed.cf.NQwL-2HVTk.css" rel="stylesheet" type="text/css"/>
	
	
	
	
	
	
	
	<style type="text/css">#mbCenter,#mbToolbar{background-color:#1a1a1a;-webkit-border-radius:10px;-khtml-border-radius:10px;-moz-border-radius:10px;border-radius:10px;-webkit-box-shadow:0 5px 20px rgba(0,0,0,.50);-khtml-box-shadow:0 5px 20px rgba(0,0,0,.50);-moz-box-shadow:0 5px 20px rgba(0,0,0,.50);box-shadow:0 5px 20px rgba(0,0,0,.50);-ms-filter:"progid:DXImageTransform.Microsoft.Shadow(Strength=5, Direction=180, Color='#000000')";filter: progid:DXImageTransform.Microsoft.Shadow(Strength=5, Direction=180, Color='#000000')}#mbOverlay{background-color:#000}#mbCenter.mbLoading{background-color:#1a1a1a}#mbBottom{color:#999}#mbTitle,#mbPrevLink,#mbNextLink,#mbCloseLink,#mbPlayLink,#mbPauseLink,#mbZoomMinus,#mbZoomValue,#mbZoomPlus{color:#fff}</style>
	<script type="application/json" class="joomla-script-options new">{"csrf.token":"ed37a4ab8f272e400044c1ea8adb7ccf","system.paths":{"root":"","base":""},"joomla.jtext":{"BUTTON_CANCEL":"Cancel","BUTTON_INITIATE":"Initiate Discussion","BUTTON_PUBLISH_NEW_DISCUSSION":"Publish New Discussion","BUTTON_REPUBLISH_DISCUSSION":"Republish Discussion","BUTTON_UNPUBLISH_DISCUSSION":"Unpublish Discussion","CONFIRM_THREAD_CREATION":"Initiate the discussion bot for this article? A thread will automatically be created in the forum and associated with this article.","CONFIRM_UNPUBLISH_DISCUSSION":"Do you want to unpublish this discussion? Note that this will not manipulate the forum in any way. It will simply remove the discussion from the article.","CONFIRM_PUBLISH_DISCUSSION":"This article has been previously initiated. Click 'Republish Discussion' to associate the article with the existing discussion (this can be undone by simply clicking 'Uninitiate Discussion' after initializing). Or click 'Publish New Discussion' to create a new thread and associate the article with the new discussion.","DISCUSSBOT_ERROR":"Error","HIDE_REPLIES":"Hide Replies","JYES":"Yes","SHOW_REPLIES":"Show Replies","SUBMITTING_QUICK_REPLY":"Submitting quick reply..."}}</script>
	<script src="/media/system/js/mootools-core.js,q092552cf642fe2bdd8a0d9879112de23.pagespeed.jm.ywlvbuicbl.js" type="text/javascript"></script>
	<script src="/media/system/js/core.js,q092552cf642fe2bdd8a0d9879112de23.pagespeed.ce.I4kCTD093I.js" type="text/javascript"></script>
	<script src="/media/system/js/mootools-more.js,q092552cf642fe2bdd8a0d9879112de23.pagespeed.jm.-6O1zP2hFm.js" type="text/javascript"></script>
	<script src="/plugins/content/hs_highlighter/lib/scripts/shCore.js+shAutoloader.js.pagespeed.jc.WXf0A72UUc.js"></script><script>eval(mod_pagespeed_su9IpL5SVr);</script>
	<script>eval(mod_pagespeed_WeiLV__hGm);</script>
	<script src="/media/jui/js/jquery.min.js,q092552cf642fe2bdd8a0d9879112de23.pagespeed.jm.Esjhv-eXHl.js" type="text/javascript"></script>
	<script src="/media,_jui,_js,_jquery-noconflict.js,q092552cf642fe2bdd8a0d9879112de23+media,_jui,_js,_jquery-migrate.min.js,q092552cf642fe2bdd8a0d9879112de23+plugins,_system,_t3,_base-bs3,_bootstrap,_js,_bootstrap.js,q092552cf642fe2bdd8a0d9879112de23+media,_system,_js,_caption.js,q092552cf642fe2bdd8a0d9879112de23+plugins,_system,_t3,_base-bs3,_js,_jquery.tap.min.js.pagespeed.jc.Zgymc-Cw8E.js"></script><script>eval(mod_pagespeed_mx8RjjKG3V);</script>
	<script>eval(mod_pagespeed_EEHT5I5lbD);</script>
	<script src="http://www.startandroid.ru/plugins/content/jfusion/discussbot/tmpl/default/jfusion.js" type="text/javascript"></script>
	<script>eval(mod_pagespeed_y3OBNTle2M);</script>
	<script>eval(mod_pagespeed_UCstg9erlS);</script>
	<script>eval(mod_pagespeed_1XadJYvQRa);</script>
	<script src="/plugins,_system,_t3,_base-bs3,_js,_off-canvas.js+plugins,_system,_t3,_base-bs3,_js,_script.js+plugins,_system,_t3,_base-bs3,_js,_menu.js+templates,_purity_iii,_js,_script.js+plugins,_system,_t3,_base-bs3,_js,_nav-collapse.js+plugins,_system,_mediabox_ck,_assets,_mediaboxck.min.js,qver==2.4.0.pagespeed.jc.tzMQyIb0Wy.js"></script><script>eval(mod_pagespeed_r6BAo9HvrJ);</script>
	<script>eval(mod_pagespeed_$6DR3H2ba0);</script>
	<script>eval(mod_pagespeed_oaBYG6qGe9);</script>
	<script>eval(mod_pagespeed_AmCkxaCr$c);</script>
	<script>eval(mod_pagespeed_ZlfQYd6O1_);</script>
	<script>eval(mod_pagespeed_rDcvdPCnuH);</script>
	<script type="text/javascript">window.addEvent('load',function(){var siteurl='https://startandroid.ru/';function path(){var args=arguments,result=[];for(var i=0;i<args.length;i++){result.push(args[i].replace('@',[siteurl,'plugins/content/hs_highlighter/lib/scripts/'].join('')));}return result;};SyntaxHighlighter.autoloader.apply(null,path('applescript            @shBrushAppleScript.js','actionscript3 as3      @shBrushAS3.js','bash shell             @shBrushBash.js','coldfusion cf          @shBrushColdFusion.js','cpp c                  @shBrushCpp.js','c# c-sharp csharp      @shBrushCSharp.js','css                    @shBrushCss.js','delphi pascal          @shBrushDelphi.js','diff patch pas         @shBrushDiff.js','erl erlang             @shBrushErlang.js','groovy                 @shBrushGroovy.js','java                   @shBrushJava.js','jfx javafx             @shBrushJavaFX.js','js jscript javascript  @shBrushJScript.js','perl pl                @shBrushPerl.js','php                    @shBrushPhp.js','text plain             @shBrushPlain.js','py python              @shBrushPython.js','ruby rails ror rb      @shBrushRuby.js','sass scss              @shBrushSass.js','scala                  @shBrushScala.js','sql                    @shBrushSql.js','vb vbnet               @shBrushVb.js','xml xhtml xslt html    @shBrushXml.js'));SyntaxHighlighter.defaults['auto-links']=false;SyntaxHighlighter.defaults['toolbar']=false;;SyntaxHighlighter.all();});JFusion.view='article';JFusion.enablePagination=1;JFusion.enableJumpto=0;JFusion.articelUrl[69]='/ru/uroki/vse-uroki-spiskom/69-urok-30-podrobnee-pro-onactivityresult-zachem-nuzhny-requestcode-i-resultcode.html';jQuery(function($){initTooltips();$("body").on("subform-row-add",initTooltips);function initTooltips(event,container){container=container||document;$(container).find(".hasTooltip").tooltip({"html":true,"container":"body"});}});jQuery(window).on('load',function(){new JCaption('img.caption');});Mediabox.scanPage=function(){var links=jQuery('a').filter(function(i){if(jQuery(this).attr('rel')&&jQuery(this).data('mediaboxck_done')!='1'){var patt=new RegExp(/^lightbox/i);return patt.test(jQuery(this).attr('rel'));}});if(!links.length)return false;new Mediaboxck(links,{overlayOpacity:0.7,resizeOpening:1,resizeDuration:240,initialWidth:320,initialHeight:180,fullWidth:'0',defaultWidth:'640',defaultHeight:'360',showCaption:1,showCounter:1,loop:0,isMobileEnable:1,isMobile:false,mobileResolution:'640',attribType:'rel',showToolbar:'0',diapoTime:'3000',diapoAutoplay:'0',toolbarSize:'normal',medialoop:false,showZoom:0,counterText:'({x} of {y})',playerpath:'/plugins/system/mediabox_ck/assets/NonverBlaster.swf'},null,function(curlink,el){var rel0=curlink.rel.replace(/[[]|]/gi," ");var relsize=rel0.split(" ");return(curlink==el)||((curlink.rel.length>8)&&el.rel.match(relsize[1]));});};jQuery(document).ready(function(){Mediabox.scanPage();});</script>
	<link href="https://startandroid.ru/ru/uroki/vse-uroki-spiskom/69-urok-30-podrobnee-pro-onactivityresult-zachem-nuzhny-requestcode-i-resultcode.html" rel="alternate" hreflang="x-default"/>

	
<!-- META FOR IOS & HANDHELD -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	<style type="text/stylesheet">@-webkit-viewport   { width: device-width; }@-moz-viewport      { width: device-width; }@-ms-viewport       { width: device-width; }@-o-viewport        { width: device-width; }@viewport           { width: device-width; }</style>
	<script type="text/javascript">if(navigator.userAgent.match(/IEMobile\/10\.0/)){var msViewportStyle=document.createElement("style");msViewportStyle.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}"));document.getElementsByTagName("head")[0].appendChild(msViewportStyle);}</script>
<meta name="HandheldFriendly" content="true"/>
<meta name="apple-mobile-web-app-capable" content="YES"/>
<!-- //META FOR IOS & HANDHELD -->




<!-- Le HTML5 shim and media query for IE8 support -->
<!--[if lt IE 9]>
<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<script type="text/javascript" src="/plugins/system/t3/base-bs3/js/respond.min.js"></script>
<![endif]-->

<!-- You can add Google Analytics here or use T3 Injection feature -->

<!--[if lt IE 9]>
<link rel="stylesheet" href="/templates/purity_iii/css/ie8.css" type="text/css" />
<![endif]-->
	</head>

<body>

<div class="t3-wrapper corporate"> <!-- Need this wrapper for off-canvas menu. Remove if you don't use of-canvas -->

	
<!-- MAIN NAVIGATION -->
<header id="t3-mainnav" class="wrap navbar navbar-default navbar-fixed-top t3-mainnav">

	<!-- OFF-CANVAS -->
			
<button class="btn btn-default off-canvas-toggle " type="button" data-pos="left" data-nav="#t3-off-canvas" data-effect="off-canvas-effect-4">
  <i class="fa fa-bars"></i>
</button>

<!-- OFF-CANVAS SIDEBAR -->
<div id="t3-off-canvas" class="t3-off-canvas ">

  <div class="t3-off-canvas-header">
    <h2 class="t3-off-canvas-header-title">Sidebar</h2>
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
  </div>

  <div class="t3-off-canvas-body">
    <div class="t3-module module " id="Mod97"><div class="module-inner"><h3 class="module-title "><span>Самое читаемое</span></h3><div class="module-ct"><ul class="mostread mod-list">
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/12-urok-3-sozdanie-avd-pervoe-prilozhenie-struktura-android-proekta.html" itemprop="url">
			<span itemprop="name">
				Урок 3. Создание AVD. Первое приложение. Структура Android-проекта.			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/9-urok-2-ustanovka-i-nastrojka-sredy-razrabotki.html" itemprop="url">
			<span itemprop="name">
				Урок 2. Установка Android Studio			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/13-urok-4-elementy-ekrana-i-ih-svojstva.html" itemprop="url">
			<span itemprop="name">
				Урок 4. Компоненты экрана и их свойства			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/14-urok-5-layout-kak-ispolzovat-smena-orientatsii-ekrana.html" itemprop="url">
			<span itemprop="name">
				Урок 5. Layout-файл в Activity. XML представление. Смена ориентации экрана.			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/4-urok-1-vvedenie.html" itemprop="url">
			<span itemprop="name">
				Урок 1. Введение.			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/16-urok-9-obrabotchiki-sobytij-na-primere-button.html" itemprop="url">
			<span itemprop="name">
				Урок 9. Обработчики событий на примере Button.			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/15-urok-6-vidy-layouts-kljuchevye-otlichija-i-svojstva.html" itemprop="url">
			<span itemprop="name">
				Урок 6. Виды Layouts. Ключевые отличия и свойства.			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/38-urok-7-layout-parametry-dlja-view-elementov.html" itemprop="url">
			<span itemprop="name">
				Урок 7. Layout параметры для View-элементов.			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/74-urok-34-hranenie-dannyh-sqlite.html" itemprop="url">
			<span itemprop="name">
				Урок 34. Хранение данных. SQLite			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/82-urok42-spisok-listview.html" itemprop="url">
			<span itemprop="name">
				Урок 42. Список - ListView			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/58-urok-21-sozdanie-i-vyzov-activity.html" itemprop="url">
			<span itemprop="name">
				Урок 21. Создание и вызов Activity			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/24-urok-8-rabotaem-s-elementami-ekrana-iz-koda.html" itemprop="url">
			<span itemprop="name">
				Урок 8. Работаем с элементами экрана из кода			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/73-urok-33-hranenie-dannyh-preferences.html" itemprop="url">
			<span itemprop="name">
				Урок 33. Хранение данных. Preferences.			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/80-urok-40-layoutinflater-uchimsja-ispolzovat.html" itemprop="url">
			<span itemprop="name">
				Урок 40. LayoutInflater. Учимся использовать.			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/489-urok-180-constraintlayout-osnovy.html" itemprop="url">
			<span itemprop="name">
				Урок 180. ConstraintLayout. Основы			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/175-urok-105-android-3-fragments-dinamicheskaja-rabota.html" itemprop="url">
			<span itemprop="name">
				Урок 105. Android 3. Fragments. Динамическая работа			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/17-urok-10-optimiziruem-realizatsiju-obrabotchikov.html" itemprop="url">
			<span itemprop="name">
				Урок 10. Оптимизируем реализацию обработчиков.			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/157-urok-92-service-prostoj-primer.html" itemprop="url">
			<span itemprop="name">
				Урок 92. Service. Простой пример			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/54-urok-19-pishem-prostoj-kalkuljator.html" itemprop="url">
			<span itemprop="name">
				Урок 19. Пишем простой калькулятор			</span>
		</a>
	</li>
	<li itemscope itemtype="https://schema.org/Article">
		<a href="/ru/uroki/vse-uroki-spiskom/67-urok-28-extras-peredaem-dannye-s-pomoschju-intent.html" itemprop="url">
			<span itemprop="name">
				Урок 28. Extras - передаем данные с помощью Intent			</span>
		</a>
	</li>
</ul>
</div></div></div>
  </div>

</div>
<!-- //OFF-CANVAS SIDEBAR -->

		<!-- //OFF-CANVAS -->

	<div class="container">

		<!-- NAVBAR HEADER -->
		<div class="navbar-header">

			<!-- LOGO -->
			<div class="logo logo-text">
				<div class="logo-text">
					<a href="/" title="StartAndroid">
						
												
						<span>StartAndroid</span>
					</a>
				</div>
			</div>
			<!-- //LOGO -->

											<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".t3-navbar-collapse">
					<i class="fa fa-bars"></i>
				</button>
			
	    	    <!-- HEAD SEARCH -->
	    <div class="head-search">     
	      <form class="form-search" action="/ru/uroki/vse-uroki-spiskom.html" method="post">
	<div class="search">
		<label for="mod-search-searchword">Поиск</label><i class="fa fa-search"></i><input name="searchword" id="mod-search-searchword" maxlength="200" class="form-control " type="text" size="0"/>	<input type="hidden" name="task" value="search"/>
	<input type="hidden" name="option" value="com_search"/>
	<input type="hidden" name="Itemid" value="110"/>
	</div>
</form>

	    </div>
	    <!-- //HEAD SEARCH -->
	    
		</div>
		<!-- //NAVBAR HEADER -->

		<!-- NAVBAR MAIN -->
				<nav class="t3-navbar-collapse navbar-collapse collapse"></nav>
		
		<nav class="t3-navbar navbar-collapse collapse">
			<div class="t3-megamenu animate elastic" data-duration="400" data-responsive="true">
<ul itemscope itemtype="http://www.schema.org/SiteNavigationElement" class="nav navbar-nav level0">
<li itemprop='name' data-id="103" data-level="1">
<a itemprop='url' class="" href="/ru/" data-target="#">Главная </a>

</li>
<li itemprop='name' data-id="124" data-level="1">
<a itemprop='url' class="" href="/ru/novosti.html" data-target="#">Новости </a>

</li>
<li itemprop='name' class="active dropdown mega" data-id="104" data-level="1">
<a itemprop='url' class=" dropdown-toggle" href="/ru/uroki.html" data-target="#" data-toggle="dropdown">Уроки <em class="caret"></em></a>

<div class="nav-child dropdown-menu mega-dropdown-menu"><div class="mega-dropdown-inner">
<div class="row">
<div class="col-xs-12 mega-col-nav" data-width="12"><div class="mega-inner">
<ul itemscope itemtype="http://www.schema.org/SiteNavigationElement" class="mega-nav level1">
<li itemprop='name' class="current active" data-id="110" data-level="2">
<a itemprop='url' class="" href="/ru/uroki/vse-uroki-spiskom.html" data-target="#">Полный список </a>

</li>
<li itemprop='name' data-id="123" data-level="2">
<a itemprop='url' class="" href="/ru/uroki/100-pdf.html" target="_blank" data-target="#">Первые 100 уроков в PDF </a>

</li>
</ul>
</div></div>
</div>
</div></div>
</li>
<li itemprop='name' data-id="167" data-level="1">
<a itemprop='url' class="" href="/ru/blog.html" data-target="#">Блог </a>

</li>
<li itemprop='name' class="dropdown mega" data-id="131" data-level="1">
<a itemprop='url' class="customlight-background dropdown-toggle" href="#" data-target="#" data-toggle="dropdown">🆕Курсы<em class="caret"></em></a>

<div class="nav-child dropdown-menu mega-dropdown-menu"><div class="mega-dropdown-inner">
<div class="row">
<div class="col-xs-12 mega-col-nav" data-width="12"><div class="mega-inner">
<ul itemscope itemtype="http://www.schema.org/SiteNavigationElement" class="mega-nav level1">
<li itemprop='name' data-id="211" data-level="2">
<a itemprop='url' class="" href="/ru/courses/vse-kursy.html" data-target="#">🆕 Все курсы </a>

</li>
<li itemprop='name' data-id="132" data-level="2">
<a itemprop='url' class="" href="/ru/courses/dagger-2.html" data-target="#">Dagger 2 </a>

</li>
<li itemprop='name' data-id="138" data-level="2">
<a itemprop='url' class="" href="/ru/courses/rxjava.html" data-target="#">RxJava </a>

</li>
<li itemprop='name' data-id="185" data-level="2">
<a itemprop='url' class="" href="/ru/courses/testing.html" data-target="#">Тестирование </a>

</li>
<li itemprop='name' data-id="187" data-level="2">
<a itemprop='url' class="" href="/ru/courses/architecture-components.html" data-target="#">Architecture Components </a>

</li>
<li itemprop='name' data-id="194" data-level="2">
<a itemprop='url' class="" href="/ru/courses/performance.html" data-target="#">Производительность </a>

</li>
<li itemprop='name' data-id="223" data-level="2">
<a itemprop='url' class="" href="/ru/courses/kotlin.html" data-target="#">Kotlin </a>

</li>
</ul>
</div></div>
</div>
</div></div>
</li>
<li itemprop='name' class="dropdown mega" data-id="107" data-level="1">
<a itemprop='url' class=" dropdown-toggle" href="#" data-target="#" data-toggle="dropdown">Инфо<em class="caret"></em></a>

<div class="nav-child dropdown-menu mega-dropdown-menu"><div class="mega-dropdown-inner">
<div class="row">
<div class="col-xs-12 mega-col-nav" data-width="12"><div class="mega-inner">
<ul itemscope itemtype="http://www.schema.org/SiteNavigationElement" class="mega-nav level1">
<li itemprop='name' data-id="160" data-level="2">
<a itemprop='url' class="" href="/ru/about/cntct5.html" data-target="#">Вопрос </a>

</li>
<li itemprop='name' data-id="108" data-level="2">
<a itemprop='url' class="" href="/ru/about/osajte.html" data-target="#">О сайте </a>

</li>
<li itemprop='name' data-id="109" data-level="2">
<a itemprop='url' class="" href="/ru/about/ob-avtore.html" data-target="#">Об авторе </a>

</li>
<li itemprop='name' data-id="224" data-level="2">
<a itemprop='url' class="" href="/ru/about/reklama.html" data-target="#">Реклама </a>

</li>
</ul>
</div></div>
</div>
</div></div>
</li>
<li itemprop='name' data-id="184" data-level="1">
<a itemprop='url' class="" href="/ru/chats.html" data-target="#">Чаты </a>

</li>
<li itemprop='name' data-id="126" data-level="1">
<a itemprop='url' class="" href="/ru/login.html" data-target="#">Войти </a>

</li>
</ul>
</div>

		</nav>
    <!-- //NAVBAR MAIN -->

	</div>
</header>
<!-- //MAIN NAVIGATION -->






  


  


	
<div id="t3-mainbody" class="container t3-mainbody">
	<div class="row">

		<!-- MAIN CONTENT -->
		<div id="t3-content" class="t3-content col-xs-12 col-sm-8 col-sm-push-4 col-md-9 col-md-push-3">
						<div class="page-header clearfix">
		<h1 class="page-title">Полный список</h1>
	</div>

<div class="item-page clearfix">


<!-- Article -->
<article>
	<meta itemprop="inLanguage" content="ru-RU"/>
	<meta itemprop="url" content="/ru/uroki/vse-uroki-spiskom/69-urok-30-podrobnee-pro-onactivityresult-zachem-nuzhny-requestcode-i-resultcode.html"/>

      
<header class="article-header clearfix">
	<h1 class="article-title" itemprop="headline">
					<a href="/ru/uroki/vse-uroki-spiskom/69-urok-30-podrobnee-pro-onactivityresult-zachem-nuzhny-requestcode-i-resultcode.html" itemprop="url" title="Урок 30. Подробнее про onActivityResult. Зачем нужны requestCode и resultCode">
				Урок 30. Подробнее про onActivityResult. Зачем нужны requestCode и resultCode</a>
			</h1>

			</header>
    
    
  <!-- Aside -->
    <aside class="article-aside clearfix">
          	<dl class="article-info  muted">

		
			<dt class="article-info-term">
													Подробности							</dt>

			
			
			
										<dd class="published hasTooltip" title="Опубликовано: ">
				<i class="icon-calendar"></i>
				<time datetime="2011-11-03T08:00:00+03:00" itemprop="datePublished">
					03 ноября 2011				</time>
			</dd>					
					
			
						</dl>
        
      </aside>  
    <!-- //Aside -->

  
  
  
	
  
	
	<section class="article-content clearfix">
		<p>В этом уроке:</p>
<p>- разбираемся, зачем нужны requestCode и resultCode в onActivityResult</p>
 
<p> </p>
<p>На прошлом уроке мы поверхностно рассмотрели, как вызвать <b>Activity</b>, и как сделать так, чтобы она <b>вернула результат</b>. Рассмотрим немного подробней этот механизм. Создадим приложение, которое будет вызывать два разных Activity и получать от них результат. Как мы помним, результат приходит в метод <a href="http://developer.android.com/reference/android/app/Activity.html#onActivityResult(int, int, android.content.Intent)" target="_blank">onActivityResult</a>. И <b>requestCode </b>используется, чтобы отличать друг от друга пришедшие результаты. А <b>resultCode </b>– позволяет определить успешно прошел вызов или нет.</p>
<p> </p>
<p>Создадим проект:</p>
<p><strong>Project name</strong>: P0301_ActivityResult<br/> <strong>Build Target</strong>: Android 2.3.3<br/> <strong>Application name</strong>: ActivityResult<br/> <strong>Package name</strong>: ru.startandroid.develop.p0301activityresult<br/> <strong>Create Activity</strong>: MainActivity</p>
<p> </p>
<p>Нарисуем экран в <b>main.xml</b>:</p>
<pre class="brush:xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"&gt;
    &lt;TextView
        android:id="@+id/tvText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:gravity="center_horizontal"
        android:text="Hello World"
        android:textSize="20sp"&gt;
    &lt;/TextView&gt;
    &lt;LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="20dp"
        android:orientation="horizontal"&gt;
        &lt;Button
            android:id="@+id/btnColor"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginRight="5dp"
            android:layout_weight="1"
            android:text="Color"&gt;
        &lt;/Button&gt;
        &lt;Button
            android:id="@+id/btnAlign"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_weight="1"
            android:text="Alignment"&gt;
        &lt;/Button&gt;
    &lt;/LinearLayout&gt;
&lt;/LinearLayout&gt;</pre>
<p>На экране <b>TextView</b> с текстом. И<b> две кнопки</b> для <b>выбора цвета </b>шрифта и <b>выравнивания </b>текста в TextView. Нажатие на кнопку будет <b>вызывать </b>Activity для выбора и получать обратно <b>результат</b>.</p>
<p>Давайте начнем кодить в <b>MainActivity.java</b>:</p>
<div class="java">
<pre class="brush:java">package ru.startandroid.develop.p0301activityresult;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener {
  
  TextView tvText;
  Button btnColor;
  Button btnAlign;
  
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        
        tvText = (TextView) findViewById(R.id.tvText);
        
        btnColor = (Button) findViewById(R.id.btnColor);
        btnAlign = (Button) findViewById(R.id.btnAlign);
        
        btnColor.setOnClickListener(this);
        btnAlign.setOnClickListener(this);
        
    }

  @Override
  public void onClick(View v) {
    // TODO Auto-generated method stub
    
  }
}</pre>
<p>Определили экранные элементы, прописали обработчик кнопкам и пока остановимся на этом.</p>
</div>
<p> </p>
<p>Создадим два других Activity. Начнем с <b>Activity </b>для <b>выбора</b> <b>цвета</b>. Создадим layout-файл <b>color.xml</b>:</p>
<pre class="brush:xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"&gt;
    &lt;Button
        android:id="@+id/btnRed"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:text="Red"&gt;
    &lt;/Button&gt;
    &lt;Button
        android:id="@+id/btnGreen"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:text="Green"&gt;
    &lt;/Button&gt;
    &lt;Button
        android:id="@+id/btnBlue"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:text="Blue"&gt;
    &lt;/Button&gt;
&lt;/LinearLayout&gt;</pre>
<p> </p>
<p>Создаем класс ColorActivity. <b>ColorActivity.java</b>:</p>
<div class="java">
<pre class="brush:java">package ru.startandroid.develop.p0301activityresult;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class ColorActivity extends Activity implements OnClickListener {
  
  Button btnRed;
  Button btnGreen;
  Button btnBlue;
  
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.color);
    
    btnRed = (Button) findViewById(R.id.btnRed);
    btnGreen = (Button) findViewById(R.id.btnGreen);
    btnBlue = (Button) findViewById(R.id.btnBlue);
    
    btnRed.setOnClickListener(this);
    btnGreen.setOnClickListener(this);
    btnBlue.setOnClickListener(this);
  }

  @Override
  public void onClick(View v) {
    Intent intent = new Intent();
    switch (v.getId()) {
    case R.id.btnRed:
      intent.putExtra("color", Color.RED);
      break;
    case R.id.btnGreen:
      intent.putExtra("color", Color.GREEN);
      break;
    case R.id.btnBlue:
      intent.putExtra("color", Color.BLUE);
      break;
    }
    setResult(RESULT_OK, intent);
    finish();
  }
}</pre>
</div>
<p>Как обычно определяем элементы, присваиваем обработчик кнопкам и реализуем onClick. В onClick мы создаем <b>Intent</b>, затем <b>определяем</b>, <b>кнопка </b>с каким цветом была нажата и помещаем в Intent объект с именем <i>color </i>и <b>значением </b>цвета. Ставим статус <b>RESULT_OK</b>, указываем, что надо вернуть объект <b>intent</b> в качестве результата и <b>закрываем </b>Activity. Для значения цветов используем системные константы.</p>
<p> </p>
<p>Аналогично создаем Activity для выбора выравнивания.</p>
<p>Layout-файл <b>align.xml</b>:</p>
<pre class="brush:xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"&gt;
    &lt;Button
        android:id="@+id/btnLeft"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:text="Left"&gt;
    &lt;/Button&gt;
    &lt;Button
        android:id="@+id/btnCenter"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:text="Center"&gt;
    &lt;/Button&gt;
    &lt;Button
        android:id="@+id/btnRight"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:text="Right"&gt;
    &lt;/Button&gt;
&lt;/LinearLayout&gt;</pre>
<p> </p>
<p> </p>
<p><b>AlignActivity.java</b>:</p>
<div class="java">
<pre class="brush:java">package ru.startandroid.develop.p0301activityresult;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Gravity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class AlignActivity extends Activity implements OnClickListener {
  
  Button btnLeft;
  Button btnCenter;
  Button btnRight;
  
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.align);
    
    btnLeft = (Button) findViewById(R.id.btnLeft);
    btnCenter = (Button) findViewById(R.id.btnCenter);
    btnRight = (Button) findViewById(R.id.btnRight);
    
    btnLeft.setOnClickListener(this);
    btnCenter.setOnClickListener(this);
    btnRight.setOnClickListener(this);
  }

  @Override
  public void onClick(View v) {
    Intent intent = new Intent();
    switch (v.getId()) {
    case R.id.btnLeft:
      intent.putExtra("alignment", Gravity.LEFT);
      break;
    case R.id.btnCenter:
      intent.putExtra("alignment", Gravity.CENTER);
      break;
    case R.id.btnRight:
      intent.putExtra("alignment", Gravity.RIGHT);
      break;
    }
    setResult(RESULT_OK, intent);
    finish();
  }
}</pre>
<p>Здесь все аналогично, как и в ColorActivity. Только работаем не с цветами, а с <b>выравниванием</b>. Не забудьте прописать оба Activity в манифесте.</p>
</div>
<p>Теперь можем завершить код в MainActivity.java. Добавим пару своих <b>констант </b>в класс для удобства:</p>
<div class="java">
<pre class="brush:java">  final int REQUEST_CODE_COLOR = 1;
  final int REQUEST_CODE_ALIGN = 2;</pre>
<p>Эти константы далее будем использовать в качестве requestCode.</p>
</div>
<p> </p>
<p>Допишем метод onClick:</p>
<div class="java">
<pre class="brush:java">  @Override
  public void onClick(View v) {
    Intent intent;
    switch (v.getId()) {
    case R.id.btnColor:
      intent = new Intent(this, ColorActivity.class);
      startActivityForResult(intent, REQUEST_CODE_COLOR);
      break;
    case R.id.btnAlign:
      intent = new Intent(this, AlignActivity.class);
      startActivityForResult(intent, REQUEST_CODE_ALIGN);
      break;
    }
  }</pre>
<p> </p>
</div>
<p>Мы определяем, какая <b>кнопка </b>была нажата и посылаем <b>Intent </b>с ожиданием возврата результата. Два вызова отличаются <b>классом </b>вызываемого Activity и параметром <b>requestCode </b>в методе <b>startActivityForResult</b>. При вызове <b>ColorActivity </b>используем константу <b>REQUEST_CODE_COLOR</b>, а при вызове <b>AlignActivity </b>- <b>REQUEST_CODE_ALIGN</b>. Эту константу мы обратно получим в методе обработки результата – <b>onActivityResult</b>, и по ней сможем определить из <b>какого </b>именно <b>Activity </b>пришел <b>результат</b>.</p>
<p>Давайте реализуем метод onActivityResult в MainActivity.java:</p>
<div class="java">
<pre class="brush:java">  @Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // запишем в лог значения requestCode и resultCode
    Log.d("myLogs", "requestCode = " + requestCode + ", resultCode = " + resultCode);
    // если пришло ОК
    if (resultCode == RESULT_OK) {
      switch (requestCode) {
      case REQUEST_CODE_COLOR:
        int color = data.getIntExtra("color", Color.WHITE);
        tvText.setTextColor(color);
        break;
      case REQUEST_CODE_ALIGN:
        int align = data.getIntExtra("alignment", Gravity.LEFT);
        tvText.setGravity(align);
        break;
      }
    // если вернулось не ОК
    } else {
      Toast.makeText(this, "Wrong result", Toast.LENGTH_SHORT).show();
    }
  }</pre>
</div>
<p>Для наглядности пишем в лог значения переменных.</p>
<p>Вспоминаем, что в ColorActivity и AlignActivity в методе setResult мы ставили статус <b>RESULT_OK </b>при отправке результата. Значит в <b>onActivityResult </b>нам надо ожидать этот статус, как обозначение успешного окончания вызова.</p>
<p>Если вызов прошел успешно (resultCode = RESULT_OK), то мы смотрим значение <b>requestCode</b>. Если оно равно константе <b>REQUEST_CODE_COLOR</b>, то вспоминаем, что мы использовали эту константу в методе <b>startActivityForResult</b>, когда отправляли запрос на <b>выбор цвета</b>. Значит, нам пришел <b>результат </b>этого <b>выбора</b>. Мы берем <b>Intent </b>(data) и <b>извлекаем </b>из него значение объекта с именем <i>color </i>и присваиваем это значение <b>цвету </b>текста в TextView. Константа <b>Color.WHITE</b> в методе <b>getIntExtra </b>означает значение по умолчанию. Т.е. если в Intent не найдется объекта с именем <i>color</i>, то метод вернет белый (white) цвет.</p>
<p>Аналогично для <b>REQUEST_CODE_ALIGN</b>. Эту константу мы использовали для запроса выбора <b>выравнивания</b>. И если в методе <b>onActivityResult </b>параметр <b>requestCode </b>= этой константе, значит пришел ответ на запрос выравнивания. И мы считываем это значение из Intent и присваиваем его атрибуту Gravity для TextView.</p>
<p>Если <b>resultCode </b>не равен <b>RESULT_OK</b>, значит что-то пошло не так. Выводим на экран соответствующее сообщение. Этот случай может наступить, например, если на экране выбора не делать выбор, а нажать кнопку Назад.</p>
<p>Давайте все сохраним и запустим приложение.</p>
<p><img src="https://lh6.googleusercontent.com/-2QOVr0-neA8/TqQ_16gqBqI/AAAAAAAAAgY/F8pv2XbLscA/s640/20111017_L0028_L_MainScreen.jpg" alt="" width="640" height="454"/></p>
<p>Нажмем Color</p>
<p> </p>
<p><img src="https://lh6.googleusercontent.com/-oZ15304XUBA/TqQ_18rWSQI/AAAAAAAAAgc/J4nLxyAKRFE/s640/20111017_L0028_L_ColorScreen.jpg" alt="" width="640" height="454"/></p>
<p>и выберем, например Red</p>
<p> </p>
<p>Цвет изменился</p>
<p><img src="https://lh4.googleusercontent.com/-5ZeJpJb8txI/TqQ_16GEkJI/AAAAAAAAAgg/FcHwkfLjjKY/s640/20111017_L0028_L_MainScreenRed.jpg" alt="" width="640" height="454"/></p>
<p> </p>
<p>смотрим лог:</p>
<p><i>requestCode = 1, resultCode = -1</i></p>
<p><b>requestCode </b>пришедший в метод <b>onActivityResult</b> равен 1. Все верно, это значение константы <b>REQUEST_CODE_COLOR</b>, которое мы использовали при вызове.</p>
<p><b>resultCode </b>= -1 – это значение системной константы <a href="http://developer.android.com/reference/android/app/Activity.html#RESULT_OK" target="_blank">RESULT_OK</a> </p>
<p>Т.е. все верно, пришел ответ на запрос цвета, и его статус = <b>RESULT_OK</b>.</p>
<p> </p>
<p>Теперь жмем Alignment и выбираем Right, получаем выравнивание вправо:</p>
<p><img src="https://lh5.googleusercontent.com/-dGBS7WlkpnU/TqQ_2RYTskI/AAAAAAAAAgs/GaS0wBMkB00/s640/20111017_L0028_L_MainScreenRedRight.jpg" alt="" width="640" height="454"/></p>
<p>Смотрим лог:</p>
<p><i>requestCode = 2, resultCode = -1</i></p>
<p><b>requestCode </b>= 2, что равно константе <b>REQUEST_CODE_ALIGN</b>. Значит пришел ответ на запрос выравнивания.</p>
<p><b>resultCode </b>= -1, т.е. RESULT_OK.</p>
<p> </p>
<p>Теперь снова жмем Color</p>
<p><img src="https://lh6.googleusercontent.com/-oZ15304XUBA/TqQ_18rWSQI/AAAAAAAAAgc/J4nLxyAKRFE/s640/20111017_L0028_L_ColorScreen.jpg" alt="" width="640" height="454"/></p>
<p>но вместо того, чтобы выбрать цвет нажмем кнопку назад</p>
<p> </p>
<p><img src="https://lh5.googleusercontent.com/-pmRepWlpG40/TqQ_4VfnvQI/AAAAAAAAAg4/4jtpcWkKQXc/s640/20111017_L0028_L_MainScreenWrong.jpg" alt="" width="640" height="454"/></p>
<p>Отобразилось наше сообщение об ошибке. Смотрим логи:</p>
<p><i>requestCode = 1, resultCode = 0</i></p>
<p><b>requestCode </b>= 1 – все верно, мы запрашивали цвет (<b>REQUEST_CODE_COLOR</b>)</p>
<p><b>resultCode </b>= 0, это значение константы <a href="http://developer.android.com/reference/android/app/Activity.html#RESULT_CANCELED" target="_blank">RESULT_CANCELED</a>, значит вызов прошел неудачно</p>
<p>Ограничений на значение статуса в методе setResult нет. RESULT_OK и RESULT_CANCELED – системные общепринятые константы. Но вы можете свободно использовать свои значения, если в этом есть необходимость.</p>
<p> </p>
<p>Итак, подведем итог.</p>
<p><b>requestCode </b>– это в некотором роде ID запроса. Задается в методе <b>startActivityForResult</b>, и проверяется потом в <b>onActivityResult</b>, чтобы точно знать, на какой вызов пришел ответ.</p>
<p><b>resultCode </b>– статус вызова. Задается в методе <b>setResult</b>, и проверяется в <b>onActivityResult</b>, чтобы понять насколько успешно прошел вызов. Если при вызове что-то пошло не так, то вернется системная константа <b>RESULT_CANCELED</b>.</p>
<p> </p>
<p>Полный код <b>MainActivity.java</b>:</p>
<div class="java">
<pre class="brush:java">package ru.startandroid.develop.p0301activityresult;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;
import android.view.Gravity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity implements OnClickListener {

  final int REQUEST_CODE_COLOR = 1;
  final int REQUEST_CODE_ALIGN = 2;

  TextView tvText;
  Button btnColor;
  Button btnAlign;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tvText = (TextView) findViewById(R.id.tvText);

    btnColor = (Button) findViewById(R.id.btnColor);
    btnAlign = (Button) findViewById(R.id.btnAlign);

    btnColor.setOnClickListener(this);
    btnAlign.setOnClickListener(this);
  }

  @Override
  public void onClick(View v) {
    Intent intent;
    switch (v.getId()) {
    case R.id.btnColor:
      intent = new Intent(this, ColorActivity.class);
      startActivityForResult(intent, REQUEST_CODE_COLOR);
      break;
    case R.id.btnAlign:
      intent = new Intent(this, AlignActivity.class);
      startActivityForResult(intent, REQUEST_CODE_ALIGN);
      break;
    }
  }

  @Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // запишем в лог значения requestCode и resultCode
    Log.d("myLogs", "requestCode = " + requestCode + ", resultCode = " + resultCode);
    // если пришло ОК
    if (resultCode == RESULT_OK) {
      switch (requestCode) {
      case REQUEST_CODE_COLOR:
        int color = data.getIntExtra("color", Color.WHITE);
        tvText.setTextColor(color);
        break;
      case REQUEST_CODE_ALIGN:
        int align = data.getIntExtra("alignment", Gravity.LEFT);
        tvText.setGravity(align);
        break;
      }
      // если вернулось не ОК
    } else {
      Toast.makeText(this, "Wrong result", Toast.LENGTH_SHORT).show();
    }
  }
}</pre>
<p> </p>
</div>
<p>На следующем уроке:</p>
<p>- узнаем что такое URI<br/> - вызываем системные приложения (браузер, звонилка, карта)</p><div><hr>
<!-- START: Modules Anywhere -->

<div class="custom">
	<p>Присоединяйтесь к нам в <b>Telegram</b>:</p>
<p>- в канале <a href="https://t.me/startandroid" target="_blank" rel="alternate noopener noreferrer">StartAndroid</a> публикуются ссылки на новые статьи с сайта startandroid.ru и интересные материалы с хабра, medium.com и т.п.</p>
<p>- в чатах решаем возникающие вопросы и проблемы по различным темам: <a href="https://t.me/startandroidchat" target="_blank" rel="alternate noopener noreferrer">Android</a>, <a href="https://t.me/kotlinchat" target="_blank" rel="alternate noopener noreferrer">Kotlin</a>, <a href="https://t.me/rxjavachat" target="_blank" rel="alternate noopener noreferrer">RxJava</a>, <a href="https://t.me/daggerchat" target="_blank" rel="alternate noopener noreferrer">Dagger</a>, <a href="https://t.me/androidtestingchat" target="_blank" rel="alternate noopener noreferrer">Тестирование</a> </p>
<p>- ну и если просто хочется поговорить с коллегами по разработке, то есть чат <a href="https://t.me/startandroidflood" target="_blank" rel="noopener noreferrer">Флудильня</a></p>
<p>- новый чат <a href="https://t.me/android_performance_chat" target="_blank" rel="noopener noreferrer">Performance</a> для обсуждения проблем производительности и для ваших пожеланий по содержанию курса по этой теме </p></div>
<!-- END: Modules Anywhere -->
<hr>
<br>

</div><div id="jfusioncontent69">                <div class="jfusionclearfix jfusionButtonArea">
                    	<a class="readon jfusionButton jfusionBtnDiscuss" target="_blank" href="http://forum.startandroid.ru/viewtopic.php?t=136"><span>Обсудить на форуме [62 replies]</span></a>
                </div>
                <div class="jfusionclearfix jfusionButtonConfirmationBox" style="display: none;">
                </div></div>	</section>
  
  <!-- footer -->
    <!-- //footer -->

			<hr class="divider-vertical"/><ul class="pager pagenav">
	<li class="previous">
		<a class="hasTooltip" title="Урок 29. Вызываем Activity и получаем результат. Метод startActivityForResult " aria-label="Previous article: Урок 29. Вызываем Activity и получаем результат. Метод startActivityForResult " href="/ru/uroki/vse-uroki-spiskom/68-urok-29-vyzyvaem-activity-i-poluchaem-rezultat-metod-startactivityforresult.html" rel="prev">
			<span class="icon-chevron-left" aria-hidden="true"></span> <span aria-hidden="true">Назад</span>		</a>
	</li>
	<li class="next">
		<a class="hasTooltip" title="Урок 31. Зачем у Intent есть атрибут data. Что такое Uri. Вызываем системные приложения" aria-label="Next article: Урок 31. Зачем у Intent есть атрибут data. Что такое Uri. Вызываем системные приложения" href="/ru/uroki/vse-uroki-spiskom/70-urok-31-zachem-u-intent-est-atribut-data-chto-takoe-uri-vyzyvaem-sistemnye-prilozhenija.html" rel="next">
			<span aria-hidden="true">Вперёд</span> <span class="icon-chevron-right" aria-hidden="true"></span>		</a>
	</li>
</ul>
	
	
	</article>
<!-- //Article -->


</div>
		</div>
		<!-- //MAIN CONTENT -->

		<!-- SIDEBAR LEFT -->
		<div class="t3-sidebar t3-sidebar-left col-xs-12 col-sm-4 col-sm-pull-8 col-md-3 col-md-pull-9 ">
			<div class="t3-module module " id="Mod87"><div class="module-inner"><div class="module-ct"><div class="mod-languages">
	<div class="pretext"><p><h1>Language</h1></p></div>

	<ul class="lang-inline" dir="ltr">
									<li class="lang-active">
			<a href="https://startandroid.ru/ru/uroki/vse-uroki-spiskom/69-urok-30-podrobnee-pro-onactivityresult-zachem-nuzhny-requestcode-i-resultcode.html">
												<img src="/media/mod_languages/images/ru.gif.pagespeed.ce.bzLHrnbLL7.gif" alt="Русский" title="Русский"/>										</a>
			</li>
								<li>
			<a href="/en/lessons/521-lesson-30-more-details-about-onactivityresult.html">
												<img src="/media/mod_languages/images/xen.gif.pagespeed.ic.a_9qHVLn30.png" alt="English (UK)" title="English (UK)"/>										</a>
			</li>
				</ul>

</div>
</div></div></div><div class="t3-module module " id="Mod323"><div class="module-inner"><div class="module-ct">

<div class="custom">
	<div align="center">
<h2>Автор сайта</h2>
<p><img src="/images/stories/pic/150x150xdmitryvinogradov.jpg.pagespeed.ic.ZW6Ncwy8-8.jpg" width="150" height="150"/></p>
<p>Дмитрий Виноградов</p>
<p>Подробнее можно <a href="https://youtu.be/xPuiCBRmJDg?t=102" target="_blank" rel="noopener noreferrer">посмотреть</a> или <a href="/ru/about/ob-avtore.html" target="_blank" rel="noopener noreferrer">почитать</a>.</p>
<p>Никакие другие люди не имеют к этому сайту никакого отношения и просто занимаются плагиатом.</p>
</div></div>
</div></div></div><div class="t3-module module " id="Mod139"><div class="module-inner"><div class="module-ct"><div class="bannergroup">

	<div class="banneritem">
																																																																			<a href="/ru/component/banners/click/1.html" title="Курс Dagger 2">
							<img src="https://startandroid.ru/images/banners/xbanner_dagger2_n.png.pagespeed.ic.rjlKy8qgX6.png" alt="Курс Dagger 2" width="240" height="400"/>
						</a>
																<div class="clr"></div>
	</div>

</div>
</div></div></div><div class="t3-module module " id="Mod91"><div class="module-inner"><div class="module-ct">

<div class="custom">
	<div align="center"><h2>Социальные сети</h2></div>
<p> </p>
<div align="center">
<p><img src="/images/stories/pic/telegram.png.pagespeed.ce.nkfL74AMTR.png" alt="" width="100" height="100"/></p>
<p>В <a href="https://t.me/startandroid" target="_blank">канале</a> я публикую ссылки на интересные и полезные статьи по Android</p>
<p>В <a href="https://t.me/startandroidchat" target="_blank">чате</a> можно обсудить вопросы и проблемы, возникающие при разработке</p>
</div>

<br><br>
<script type="text/javascript" src="//vk.com/js/api/openapi.js?144"></script>
<!-- VK Widget -->

<div align="center"><h4>Группа ВКонтакте</h4>
<div id="vk_groups"></div>
</div>
<script type="text/javascript">VK.Widgets.Group("vk_groups",{mode:3},36284347);</script>
<br><br>
</div>
</div></div></div><div class="t3-module module " id="Mod90"><div class="module-inner"><div class="module-ct">

<div class="custom">
	<h1>Поддержка проекта</h1>
<p><a href="https://money.yandex.ru/prepaid/" target="_blank">Яндекс</a><br/><strong>410011180491924</strong></p>
<p><a href="http://www.webmoney.ru/rus/addfunds/index.shtml">WebMoney</a><br/><strong>R248743991365</strong><br/><strong>Z551306702056</strong></p>
<p><a href="https://www.paypal.me/startandroidcourse">Paypal</a></p>

</div>
</div></div></div>
		</div>
		<!-- //SIDEBAR LEFT -->

	</div>
</div> 


  


  


	
<!-- BACK TOP TOP BUTTON -->
<div id="back-to-top" data-spy="affix" data-offset-top="300" class="back-to-top hidden-xs hidden-sm affix-top">
  <button class="btn btn-primary" title="Back to Top"><i class="fa fa-caret-up"></i></button>
</div>
<script type="text/javascript">(function($){$('#back-to-top').on('click',function(){$("html, body").animate({scrollTop:0},500);return false;});$(window).load(function(){if((parseInt($(window).height())*2)>(parseInt($(document).height()))){$('#back-to-top').hide();}});})(jQuery);</script>
<!-- BACK TO TOP BUTTON -->

<!-- FOOTER -->
<footer id="t3-footer" class="wrap t3-footer">

	
	<section class="t3-copyright">
		<div class="container">
			<div class="row">
				<div class="col-md-8 copyright ">
					

<div class="custom">
	<p>© Start Android, 2011-2020. Все права защищены, копирование материалов возможно только с разрешения автора </p>
<!-- START: Modules Anywhere -->

<div class="custom">
	<p>При возникновении каких-либо вопросов, используйте <a href="http://startandroid.ru/ru/about/cntct5.html" target="blank">форму обратной связи</a> </p></div>
<!-- END: Modules Anywhere -->
<p> </p>
<p> </p></div>

          <small>
            <a href="http://twitter.github.io/bootstrap/" title="Bootstrap by Twitter" target="_blank">Bootstrap</a> is a front-end framework of Twitter, Inc. Code licensed under <a href="https://github.com/twbs/bootstrap/blob/master/LICENSE" title="MIT License" target="_blank">MIT License.</a>
          </small>
          <small>
            <a href="http://fortawesome.github.io/Font-Awesome/" target="_blank">Font Awesome</a> font licensed under <a href="http://scripts.sil.org/OFL">SIL OFL 1.1</a>.
          </small>
				</div>
									<div class="col-md-4 poweredby text-hide">
						<a class="t3-logo t3-logo-color" href="http://t3-framework.org" title="Powered By T3 Framework" target="_blank" rel="nofollow">Powered by <strong>T3 Framework</strong></a>
					</div>
							</div>
		</div>
	</section>

</footer>
<!-- //FOOTER -->

</div>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-19388196-4','auto');ga('send','pageview');</script>
</body>
</html>
